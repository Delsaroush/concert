<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" type="text/css" href="/styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css">

    <style>
        nav {
            background: #444;
            color: white;
            padding: 10px;
            text-align: center;
        }
        nav a {
            color: white;
            margin: 10px;
            text-decoration: none;
        }
        nav a:hover {
            text-decoration: underline;
        }
    </style>
    <title>Concert List</title>
</head>

<body>
    <h1>Upcoming Concerts</h1>

    <nav>
        <a href="/">Home</a>
        <a href="/my_bookings/">My Bookings</a>
        <a href="/contact_us/">Contact Us</a>
    </nav>

    <label for="genre">Genre:</label>
    <select id="genre" name="genre">
        <option value="all">All</option>
        <option value="rock">Rock</option>
        <option value="jazz">Jazz</option>
        <option value="acoustic">Acoustic</option>
    </select>

    <div id="loading-spinner" style="display:none;">
        <img src="/static/loading.jpg" alt="Loading...">
    </div>

    <div id="concert-results">
        <ul>
            <li>
                <strong>Rock Symphony</strong><br>
                Date: March 18, 2025, 7 p.m.<br>
                Venue: Nairobi Arena<br>
                <p id="countdown-rock">Time Remaining: 2 days, 5 hours</p>
                <a href="/1/book/" aria-label="Book Ticket for Rock Symphony">Book Ticket</a>
            </li>
            <li>
                <strong>Acoustic Night</strong><br>
                Date: April 5, 2025, 6:30 p.m.<br>
                Venue: Kenya Cultural Center<br>
                <p id="countdown-acoustic">Time Remaining: 21 days, 10 hours</p>
                <a href="/2/book/" aria-label="Book Ticket for Acoustic Night">Book Ticket</a>
            </li>
            <li>
                <strong>Jazz &amp; Blues Evening</strong><br>
                Date: May 22, 2025, 8 p.m.<br>
                Venue: Westlands Theater<br>
                <p id="countdown-jazz">Time Remaining: 68 days, 3 hours</p>
                <a href="/3/book/" aria-label="Book Ticket for Jazz & Blues Evening">Book Ticket</a>
            </li>
        </ul>
    </div>

    <iframe
        src="https://www.google.com/maps/embed/v1/place?key=YOUR_API_KEY&q=Nairobi+Arena"
        width="600"
        height="450"
        style="border:0;"
        allowfullscreen=""
        loading="lazy">
    </iframe>

    <label for="ticket_count">Tickets:</label>
    <input type="number" id="ticket_count" name="ticket_count" min="1">

    <!-- Pagination -->
    <div class="pagination">
        <button onclick="fetchPage('prev')">Previous</button>
        <span>Page 1 of 3</span>
        <button onclick="fetchPage('next')">Next</button>
    </div>

    <button id="filter-btn">Filter</button>

    <script>
        document.getElementById('filter-btn').addEventListener('click', function() {
            document.getElementById('loading-spinner').style.display = 'block';
            const startDate = document.getElementById('start_date')?.value || '';
            const endDate = document.getElementById('end_date')?.value || '';

            fetch(`/filter_concerts?start_date=${startDate}&end_date=${endDate}`)
                .then(response => {
                    document.getElementById('loading-spinner').style.display = 'none';
                    if (!response.ok) throw new Error('Network response was not ok');
                    return response.text();
                })
                .then(data => {
                    document.getElementById('concert-results').innerHTML = data;
                })
                .catch(error => {
                    console.error('Error:', error);
                    document.getElementById('concert-results').innerHTML =
                        '<p style="color:red;">An error occurred while fetching concerts.</p>';
                });
        });
    </script>
</body>
</html>
